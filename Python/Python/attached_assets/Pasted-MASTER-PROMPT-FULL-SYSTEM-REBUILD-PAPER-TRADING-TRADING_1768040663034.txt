MASTER PROMPT â€” FULL SYSTEM REBUILD (PAPER TRADING + TRADINGVIEW DATA)
ğŸ¯ OBJECTIVE (VERY CLEAR)

Fix and complete the existing intraday trading bot system so that:

All existing bots are properly wired together

Bot starts paper trading immediately

Market data is fetched from TradingView (or TradingView-style public data)

Trades are simulated internally (NO real broker)

All trade, PnL, and signal data flows correctly to the dashboard

No new unnecessary files are created

No tokens or credentials are required

ğŸ“ FILES (STRICT â€” DO NOT CREATE EXTRA FILES)

Use ONLY these existing files:

dashboard_api.py
event_logger.py
market_data_and_signal.py
state_manager.py
trade_execution_and_mode.py
trade_management_and_risk.py
index.html (inline CSS only)


âŒ Do NOT add React
âŒ Do NOT add CSS/JS files
âŒ Do NOT remove any existing file

âš™ï¸ SYSTEM MODE
MODE = PAPER_TRADING
BROKER = NONE
DATA_SOURCE = TRADINGVIEW
TOKENS = NOT REQUIRED

ğŸ§  CORE ARCHITECTURE (MANDATORY)
ğŸ”¹ Central Orchestrator (IMPORTANT)

Create a main execution loop (can live inside dashboard_api.py or state_manager.py) that runs continuously and performs this pipeline:

Market Data
   â†“
Signal Generation
   â†“
Trade Execution (Paper)
   â†“
Trade Management & Risk
   â†“
Event Logging
   â†“
State Update
   â†“
Dashboard Exposure


No bot should work in isolation.

ğŸ“Š MARKET DATA (CRITICAL POINT)
ğŸ”¹ Source

Use TradingView-style candle data

If direct TradingView fetch is not possible:

Use a public OHLC feed

Or simulate TradingView candles realistically

ğŸ”¹ Implement in:

market_data_and_signal.py

Responsibilities:

Fetch OHLC data (1m / 5m)

Support multiple symbols:

NIFTY

BANKNIFTY

BTCUSDT

Normalize data into a common format

Example:

{
  "symbol": "NIFTY",
  "open": 22410,
  "high": 22440,
  "low": 22390,
  "close": 22430,
  "timestamp": "2026-01-10 09:20"
}

ğŸ“ˆ SIGNAL GENERATION

In market_data_and_signal.py:

Generate BUY / SELL / HOLD signals

Use:

Trend direction

Momentum

Volatility filter

Attach confidence score

Example:

{
  "signal": "BUY",
  "confidence": 0.78,
  "reason": ["Trend Up", "Momentum Strong"]
}


Send signal to StateManager.

ğŸ’¼ PAPER TRADE EXECUTION

In trade_execution_and_mode.py:

Read signals from StateManager

Check:

Max active trades = 2

Capital per trade = â‚¹1000

Create simulated trade object

Assign:

Entry price

Quantity (paper)

Trade ID

Send trade to:

TradeManagementEngine

EventLogger

StateManager

ğŸ›¡ï¸ TRADE MANAGEMENT & RISK

In trade_management_and_risk.py:

Responsibilities:

Monitor active trades

Apply:

Trailing stop loss

Fixed SL

Time-based exit (2:30 PM)

Enforce:

Daily loss limit â‚¹150

Kill switch if breached

On exit:

Calculate PnL

Notify ExecutionEngine

Update StateManager

Log via EventLogger

ğŸ§¾ EVENT LOGGING

In event_logger.py:

Log:

Signals

Trade entries

Trade exits

PnL

Maintain:

Win / loss count

Total PnL

Expose structured summaries for charts

ğŸ§  STATE MANAGER (SINGLE SOURCE OF TRUTH)

In state_manager.py:

Store:

Latest market data

Latest signal

Active trades

Closed trades

Daily PnL

System mode & risk flags

Provide read-only access to:

Dashboard

Execution engine

Risk engine

ğŸŒ DASHBOARD API

In dashboard_api.py:

Expose APIs:

/status
/summary
/trades/active
/trades/closed
/charts/pnl
/charts/winloss


Serve:

index.html


No trading logic here.

ğŸ–¥ï¸ DASHBOARD UI (index.html)
REQUIREMENTS:

Inline CSS only

Dark professional trading terminal look

No marketing UI

MUST DISPLAY:

System status bar

Total PnL (circle chart)

Win/Loss mountain chart with filters:

Time

Market

Active trades table

Closed trades table (scroll down)

Dashboard must poll backend every 2 seconds.

ğŸ”„ DATA FLOW RULES

No duplicate trades

No missing updates

All state changes must go through StateManager

All logs must go through EventLogger

ğŸš« STRICTLY FORBIDDEN

Live trading

Broker APIs

Tokens

Hardcoded credentials

Random mock UI text

ğŸŸ¢ SUCCESS CRITERIA

System is considered COMPLETE when:
âœ” Paper trades start automatically
âœ” Market data updates continuously
âœ” Trades enter & exit logically
âœ” PnL updates correctly
âœ” Dashboard shows real numbers
âœ” No crashes

Final log:

[SYSTEM READY] Paper trading live with TradingView data

ğŸ§  FINAL NOTE

This is foundation-grade infrastructure.
Once this works, adding:

Dhan sandbox

Google Drive

AI learning

will be easy & safe.